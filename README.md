# 스프링 입문
[인프런 강의 - 기록 및 정리] 스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술

### 프로젝트 환경 설정
    스프링 프로젝트와 테스트 페이지 생성 후 빌드

    1. Spring Boot는 static과 template 경로에서 welcomePage로 index.html을 먼저 찾는다.
    
    2. 스프링 프로젝트 build 하고 실행하는 방법
        1) 스프링 프로젝트 경로로 이동하여 gradlew.bat 파일을 빌드한다.
            > window의 경우, gradlew.bat clean build
            > macOS의 경우, ./gradlew build
        2) 위의 명령어를 실행하면 /build/libs 경로에 jar 파일이 생성된다.
            > java -jar hello-spring-0.0.1-SNAPSHOT.jar
            > 서버가 실행된다.
            > 브라우저에서 localhost:8080으로 확인!

### 스프링 웹 개발 기초
    1. 정적 컨텐츠
        파일을 그대로 전달
        > http://localhost:8080/hello-static.html
        > controller에서 확인했을 때 관련 api가 없으면 resource 경로에서 파일을 찾아 정적 컨텐츠를 전달한다.
    2. MVC와 템플릿 엔진
        데이터를 변경하고 템플릿 엔진을 사용하여 전달
        > MVC(Model View Controller)
        > view는 화면, controller는 비즈니스 로직 처리, model은 데이터 관리로 분리
    3. API
        JSON 형태로 데이터를 전달
        > @ResponseBody를 설정하면 뷰 이름을 반환하는 것이 아니라 데이터 그대로 전달하도록 인식한다.
        > HTTP body에 문자내용을 직접 반환
        > 객체를 생성하여 JSON(key : value) 형태로 데이터를 전달

### 회원 관리 예제 - 백엔드 개발
    1. 웹 애플리케이션 계층 구조
        1) 컨트롤러 : 웹 MVC의 컨트롤러 역할
        2) 서비스 : 핵심 비즈니스 로직 구현
        3) 리포지토리 : 데이터베이스에 접근, 도메인 객체를 DB에 저장하고 관리
            > CRUD 기능 구현에 가까운 로직들로 구성
        4) 도메인 : 비즈니스 도메인 객체 (회원, 주문 등 데이터베이스에 저장하고 관리)
    2. JUnit 사용해서 테스트 진행하기
        > test 폴더 경로에 파일을 생성하여 @Test 어노테이션을 사용하여 테스트 진행
        > 임시로 틀을 만들어서 개발한 부분이 틀에 맞는지 테스트를 진행
        > 코드가 많아지고 여러 사람이 함께 개발할 경우에 필요한 과정 중 하나!
        > Assertions를 사용하여 값 비교하여 확인을 한다.
        > 테스트는 각각 독립적으로 싱행되어야하고 테스트 순서에 의존관계가 있는 것은 좋은 테스트가 아니다.

### 스프링 빈과 의존 관계
    1. 컴포넌트 스캔과 자동 의존관계 설정
        > @Component 에노테이션이 있으면 스프링 빈으로 자동 등록된다.
        > 아래의 어노테이션들은 @Component를 포함한다.
        > @Component와 관련이 있는 컴포넌트들을 하나씩 캡쳐를 스프링 컨테이너에 등록을 해준다.
        > 기본적으로 main() 함수가 있는 패키지부터 그 아래로는 자동으로 빈 등록을 해준다.

        > 스프링은 스프링 컨테이너에 스프링 빈을 등록할 때, 기본으로 싱글콘으로 등록한다.
        따라서 같은 스프링 빈이면 모두 같은 인스턴스다.

        > @Autowired를 통해서 스프링 컨테이네 등록된 빈과 연결을 해준다.
        
        1) @Controller : 컨트롤러가 스프링 빈으로 자동 등록된 이유도 컴포넌트 스캔 때문이다.
        2) @Service : 서비스를 스프링 빈으로 자동 등록
        3) @Repository : 레파지토리를 스프링 빈으로 자동 등록
    2. 자바 코드로 직접 스프링 빈 등록하기
        DI(dependency injection) : 의존관계 주입
        > 외부에서 두 객체 간의 관계를 결정해주는 디자인 패턴
        > 인터페이스를 사이에 둬서 클래스 레벨에서는 의존관계가 고정되지 않도록 하고 런타임 시에 관계를 동적으로 주입할 수 있게 한다.
        > 의존관계가 실행 중에는 동적으로 변하는 경우는 거의 없으므로 생성자 주입을 권장한다.
        > 주입되는 빈은 interface로 구현하여 재사용할 수 있도록 한다.(의존성 분리)

        1) 생성자 주입 : 제일 추천되는 방법으로 생성자를 통해서 빈을 주입 받는다.
        2) 필드 주입 : 수정을 할 수 없어서 커스텀하기 어렵다.
        3) setter 주입 : public으로 노출이 되기 때문에 변경이 잘못되면 문제가 생길 수 있다.

        > 자바 빈 등록 설정파일을 직접 생성하여 빈을 등록하면 연결되는 서비스나 레파지토리가 변경되어도
        설정 파일만 변경하면 되기 때문에 이런 경우에는 자동 스캔보다 직접 구현하는 것이 나을 수 있다.
        
        > 스프링 빈에 등록되지 않은 클래스(컴포넌트) 내에서 @Autowired를 사용하더라도 스프링 빈에 등록되지
        않았기 때문에 동작하지 않는다.